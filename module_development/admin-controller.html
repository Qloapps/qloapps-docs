<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Admin Controller | QloApps Documentation</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" href="/favicon.ico">
    <meta name="description" content="QloApps Developer Documentation">
    
    <link rel="preload" href="/assets/css/0.styles.5803b1a3.css" as="style"><link rel="preload" href="/assets/js/app.e51dc7ac.js" as="script"><link rel="preload" href="/assets/js/2.5b266ac9.js" as="script"><link rel="preload" href="/assets/js/6.f6907ecb.js" as="script"><link rel="prefetch" href="/assets/js/10.8d109458.js"><link rel="prefetch" href="/assets/js/11.f31594c2.js"><link rel="prefetch" href="/assets/js/12.ada217e9.js"><link rel="prefetch" href="/assets/js/13.a482bc98.js"><link rel="prefetch" href="/assets/js/14.c2e3b635.js"><link rel="prefetch" href="/assets/js/15.76f64c71.js"><link rel="prefetch" href="/assets/js/16.0ddca99d.js"><link rel="prefetch" href="/assets/js/17.492ad72c.js"><link rel="prefetch" href="/assets/js/18.3e90ddf6.js"><link rel="prefetch" href="/assets/js/19.57023bff.js"><link rel="prefetch" href="/assets/js/20.b220e8ef.js"><link rel="prefetch" href="/assets/js/21.9957bd35.js"><link rel="prefetch" href="/assets/js/22.13d0bde6.js"><link rel="prefetch" href="/assets/js/23.d417f008.js"><link rel="prefetch" href="/assets/js/24.b4fc4828.js"><link rel="prefetch" href="/assets/js/25.6bc74730.js"><link rel="prefetch" href="/assets/js/26.f11c8063.js"><link rel="prefetch" href="/assets/js/27.4819fa47.js"><link rel="prefetch" href="/assets/js/28.57023b92.js"><link rel="prefetch" href="/assets/js/29.3d147444.js"><link rel="prefetch" href="/assets/js/3.44c03bf6.js"><link rel="prefetch" href="/assets/js/30.b24d150f.js"><link rel="prefetch" href="/assets/js/31.154f4b9c.js"><link rel="prefetch" href="/assets/js/32.0818a40d.js"><link rel="prefetch" href="/assets/js/33.254290f0.js"><link rel="prefetch" href="/assets/js/34.715b5125.js"><link rel="prefetch" href="/assets/js/35.1f665de7.js"><link rel="prefetch" href="/assets/js/36.d5c610f9.js"><link rel="prefetch" href="/assets/js/37.26d6155b.js"><link rel="prefetch" href="/assets/js/38.2f71fce8.js"><link rel="prefetch" href="/assets/js/39.267bdfaf.js"><link rel="prefetch" href="/assets/js/4.273885aa.js"><link rel="prefetch" href="/assets/js/40.8f0b57d5.js"><link rel="prefetch" href="/assets/js/41.110613ac.js"><link rel="prefetch" href="/assets/js/42.a98453f5.js"><link rel="prefetch" href="/assets/js/43.40f1ccd8.js"><link rel="prefetch" href="/assets/js/44.6b1a988c.js"><link rel="prefetch" href="/assets/js/45.d64a8834.js"><link rel="prefetch" href="/assets/js/46.5842f7b8.js"><link rel="prefetch" href="/assets/js/47.8100237b.js"><link rel="prefetch" href="/assets/js/48.12be0c62.js"><link rel="prefetch" href="/assets/js/49.13de6223.js"><link rel="prefetch" href="/assets/js/5.4f6a235c.js"><link rel="prefetch" href="/assets/js/50.6450b5fd.js"><link rel="prefetch" href="/assets/js/51.761803a6.js"><link rel="prefetch" href="/assets/js/7.1ecf9302.js"><link rel="prefetch" href="/assets/js/8.00567e5f.js"><link rel="prefetch" href="/assets/js/9.1d044aa4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5803b1a3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="QloApps Documentation" class="logo"> <span class="site-name can-hide">QloApps Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://forums.qloapps.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Forum
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://qloapps.com/addons/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Extensions
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/webkul/hotelcommerce" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute to QloApps
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://forums.qloapps.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Forum
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://qloapps.com/addons/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Extensions
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/webkul/hotelcommerce" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute to QloApps
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/introduction/" class="sidebar-heading clickable"><span>Introduction</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/architecture/" class="sidebar-heading clickable"><span>Architecture</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/development/" class="sidebar-heading clickable"><span>Development</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/database/" class="sidebar-heading clickable"><span>Database</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/helpers/" class="sidebar-heading clickable"><span>Helpers</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/module_development/" class="sidebar-heading clickable router-link-active open"><span>Module Development</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/module_development/creation.html" class="sidebar-link">Creation</a></li><li><a href="/module_development/folder-structure.html" class="sidebar-link">Folder Structure</a></li><li><a href="/module_development/classes.html" class="sidebar-link">Module classes</a></li><li><a href="/module_development/configuration.html" class="sidebar-link">Adding a Configuration page</a></li><li><a href="/module_development/frontoffice-controller.html" class="sidebar-link">Display Content in Front office</a></li><li><a href="/module_development/admin-controller.html" aria-current="page" class="active sidebar-link">Manage Module through Admin Controller</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/module_development/admin-controller.html#create-tab-for-admin-controller" class="sidebar-link">Create Tab for Admin Controller</a></li><li class="sidebar-sub-header"><a href="/module_development/admin-controller.html#create-admin-controller" class="sidebar-link">Create Admin controller</a></li></ul></li><li><a href="/module_development/module-translations.html" class="sidebar-link">Translations</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/webservice/" class="sidebar-heading clickable"><span>Webservice API</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/theme/" class="sidebar-heading clickable"><span>Theme</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/testing/" class="sidebar-link">Testing</a></li><li><a href="/upgrade/" class="sidebar-link">Upgrade</a></li><li><a href="/contribute/" class="sidebar-link">Contribute</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="admin-controller"><a href="#admin-controller" class="header-anchor">#</a> Admin Controller</h1> <h2 id="create-tab-for-admin-controller"><a href="#create-tab-for-admin-controller" class="header-anchor">#</a> Create Tab for Admin Controller</h2> <p>To create an admin controller we will first need to create an entry of that admin controller’s class in <code>_DB_PREFIX_tab</code> table. And generally, we make all these entries at the time of module installation.</p> <p>There are two options to create admin module controller:</p> <ul><li>Create a tab in back office menu for the admin controller</li> <li>Create a hidden admin controller which can be opened through custom link.</li></ul> <p>For both these cases we will need to call <code>installTab()</code> function during module installation. we have created a <code>callInstallTab()</code> function which will handle all tab creation for multiple tabs.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">install</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword static-context">parent</span><span class="token operator">::</span><span class="token function">install</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">||</span> <span class="token operator">!</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">registerHook</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'actionFrontControllerSetMedia'</span><span class="token punctuation">)</span>
        <span class="token operator">||</span> <span class="token operator">!</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">registerHook</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'displayLeftColumn'</span><span class="token punctuation">)</span>
        <span class="token operator">||</span> <span class="token operator">!</span><span class="token class-name static-context">Configuration</span><span class="token operator">::</span><span class="token function">updateValue</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'MYQLOMODULE_NAME'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'Module name in configuration table'</span><span class="token punctuation">)</span>
        <span class="token operator">||</span> <span class="token operator">!</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">createModuleTables</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">||</span> <span class="token operator">!</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">callInstallTab</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token constant boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token constant boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * call installTab for all required admin controllers
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">callInstallTab</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">installTab</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'class_name'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'tab_name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token constant boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Creates entry for admin tab in QloApps database from provided arguments
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">installTab</span><span class="token punctuation">(</span><span class="token variable">$className</span><span class="token punctuation">,</span> <span class="token variable">$tabName</span><span class="token punctuation">,</span> <span class="token variable">$tabParentName</span> <span class="token operator">=</span> <span class="token constant boolean">false</span><span class="token punctuation">,</span> <span class="token variable">$hiddenTab</span> <span class="token operator">=</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$tab</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tab</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$tab</span><span class="token operator">-&gt;</span><span class="token property">active</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token variable">$tab</span><span class="token operator">-&gt;</span><span class="token property">class_name</span> <span class="token operator">=</span> <span class="token variable">$className</span><span class="token punctuation">;</span>
    <span class="token variable">$tab</span><span class="token operator">-&gt;</span><span class="token property">name</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name static-context">Language</span><span class="token operator">::</span><span class="token function">getLanguages</span><span class="token punctuation">(</span><span class="token constant boolean">true</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token variable">$lang</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$tab</span><span class="token operator">-&gt;</span><span class="token property">name</span><span class="token punctuation">[</span><span class="token variable">$lang</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id_lang'</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$tabName</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$hiddenTab</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$tab</span><span class="token operator">-&gt;</span><span class="token property">id_parent</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">elseif</span> <span class="token punctuation">(</span><span class="token variable">$tabParentName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$tab</span><span class="token operator">-&gt;</span><span class="token property">id_parent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword type-casting">int</span><span class="token punctuation">)</span> <span class="token class-name static-context">Tab</span><span class="token operator">::</span><span class="token function">getIdFromClassName</span><span class="token punctuation">(</span><span class="token variable">$tabParentName</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token variable">$tab</span><span class="token operator">-&gt;</span><span class="token property">id_parent</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token variable">$tab</span><span class="token operator">-&gt;</span><span class="token property">module</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">name</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token variable">$tab</span><span class="token operator">-&gt;</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="create-a-tab-in-back-office-menu-for-the-admin-controller"><a href="#create-a-tab-in-back-office-menu-for-the-admin-controller" class="header-anchor">#</a> Create a tab in back office menu for the admin controller</h3> <p>To create an admin controller with tab in back office, we will need to specify the <code>$tab_parent_name</code> for that controller. We have two options for creating admin controller with tabs.</p> <p><strong>Create new tab inside previously created tab</strong></p> <p>Suppose we want to add our admin controller inside Orders tab, our <code>installTab()</code> function call would be as below</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">callInstallTab</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">installTab</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'AdminMyModule'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'Manage Products'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'AdminParentOrders'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token constant boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This will create a new tab inside Orders tab</p> <p><img src="/assets/img/admin-tab.68adc79c.png" alt="new tab"></p> <p><strong>Create a new menu in back office menu</strong></p> <p>To create a new menu for for your module, we will need to pass false as <code>$tabParentName</code> for root tab.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">callInstallTab</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">installTab</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'AdminParentMyModule'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'My module menu'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">installTab</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'AdminMyModule'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'Manage Products'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'AdminParentMyModule'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token constant boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>In the above example you can see that we have called an additional tab, this is because the parent tab will not be a controller. The controller <code>AdminMyModule</code> will be listed inside our parent tab.</p> <p><img src="/assets/img/admin-tab-menu.bc5fe2db.png" alt="new menu"></p> <h3 id="create-a-hidden-admin-controller"><a href="#create-a-hidden-admin-controller" class="header-anchor">#</a> Create a hidden admin controller</h3> <p>To create a hidden admin controller we will need to pass $hiddenTab as true</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">callInstallTab</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">installTab</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'AdminMyModule'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'Manage Products'</span><span class="token punctuation">,</span> <span class="token constant boolean">false</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token constant boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This will create a new entry in <code>_DB_PREFIX_tab</code> table but the tab will not be visible in back office menu. To access this admin controller create a link to this module and redirect to module.<br> <code>$adminLink = $this-&gt;context-&gt;link-&gt;getAdminLink('AdminMyModule');</code></p> <p>We can assign this to smarty and create a link or we can redirect to this module on a function call.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name static-context">Tools</span><span class="token operator">::</span><span class="token function">redirectAdmin</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">context</span><span class="token operator">-&gt;</span><span class="token property">link</span><span class="token operator">-&gt;</span><span class="token function">getAdminLink</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'AdminMyModule'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>In the above example when admin will click on config button the admin controller will be opened instead of configuration page.</p> <h2 id="create-admin-controller"><a href="#create-admin-controller" class="header-anchor">#</a> Create Admin controller</h2> <p>After creating tab for admin controller next step will be to declare admin controller. Lets create a controller file for AdminMyModule which will have controller in its suffix such as <code>AdminMyModuleController.php</code> and place the file in <code>/controller/admin</code> directory.</p> <p>Our admin controller will be used to manage data in table <code>my_product_list</code>.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> AdminAddHotelController <span class="token keyword">extends</span> <span class="token class-name">ModuleAdminController</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">bootstrap</span> <span class="token operator">=</span> <span class="token constant boolean">true</span><span class="token punctuation">;</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">table</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'my_product_list'</span><span class="token punctuation">;</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">className</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'MyProductList'</span><span class="token punctuation">;</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">identifier</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'id'</span><span class="token punctuation">;</span>

        <span class="token keyword static-context">parent</span><span class="token operator">::</span><span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">_join</span> <span class="token operator">.=</span> <span class="token string single-quoted-string">'LEFT JOIN `'</span><span class="token operator">.</span><span class="token constant">_DB_PREFIX_</span><span class="token operator">.</span><span class="token string single-quoted-string">'product_lang` pl
        ON (pl.`id_product` = a.`id_product` AND pl.`id_lang` = '</span><span class="token operator">.</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">context</span><span class="token operator">-&gt;</span><span class="token property">language</span><span class="token operator">-&gt;</span><span class="token property">id</span><span class="token operator">.</span><span class="token string single-quoted-string">')'</span><span class="token punctuation">;</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">_join</span> <span class="token operator">.=</span> <span class="token string single-quoted-string">'LEFT JOIN `'</span><span class="token operator">.</span><span class="token constant">_DB_PREFIX_</span><span class="token operator">.</span><span class="token string single-quoted-string">'customer` c
        ON (c.`id_customer` = a.`id_customer`)'</span><span class="token punctuation">;</span>

        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">_select</span> <span class="token operator">=</span> <span class="token string single-quoted-string">' pl.`name` as room_type_name, CONCAT(c.`firstname`, '</span> <span class="token string single-quoted-string">', c.`lastname`) as full_name'</span><span class="token punctuation">;</span>

        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">fields_list</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
            <span class="token string single-quoted-string">'id'</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
                <span class="token string single-quoted-string">'title'</span> <span class="token operator">=&gt;</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">l</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'ID'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string single-quoted-string">'align'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'center'</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'room_type_name'</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
                <span class="token string single-quoted-string">'title'</span> <span class="token operator">=&gt;</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">l</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Room Type'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string single-quoted-string">'align'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'center'</span><span class="token punctuation">,</span>
                <span class="token string single-quoted-string">'filter_key'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'pl!name'</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'full_name'</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
                <span class="token string single-quoted-string">'title'</span> <span class="token operator">=&gt;</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">l</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Customer Name'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string single-quoted-string">'align'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'center'</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">'active'</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
                <span class="token string single-quoted-string">'align'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'center'</span><span class="token punctuation">,</span>
                <span class="token string single-quoted-string">'title'</span> <span class="token operator">=&gt;</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">l</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Status'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string single-quoted-string">'active'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'status'</span><span class="token punctuation">,</span>
                <span class="token string single-quoted-string">'type'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'bool'</span><span class="token punctuation">,</span>
                <span class="token string single-quoted-string">'orderby'</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">false</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">renderList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">addRowAction</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'edit'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">addRowAction</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'delete'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token keyword static-context">parent</span><span class="token operator">::</span><span class="token function">renderList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>When admin controller is loaded, the default view is a list containing the data inside the table declared in the controller.</p> <p>Here is a line by line explanation:</p> <ol><li><code>class AdminAddHotelController</code> every admin controller will extend <code>ModuleAdminController</code> which define the basic structure of the controller.</li> <li><code>$this-&gt;bootstrap = true;</code> it determine does this controller need to load bootstrap classes.</li> <li>Next we define the table and its properties which the controller will use to fetch data and display in the list or for creating and editing data.
<code>$this-&gt;table</code> define the table from where data is to be fetched
<code>$this-&gt;className</code> define the ObjectModel class for that table. It is used to determine the structure of the table.
<code>$this-&gt;identifier</code> define the primary key colum of the table.</li> <li>Sometimes we need to get data from other tables, for that use <code>$this-&gt;_join</code> statement to join current tables with other tables and use <code>$this-&gt;select</code> to get columns from joined tables.
By default the main table declared in the controller is aliased as 'a' keyword. In the example we have joined module table with product table and customer table in order to get customer name and room type name from <code>id_customer</code> and <code>id_product</code> respectively.</li> <li><code>$this-&gt;fields_list</code> define list display structure in admin module controller. here we have defined the coulums in the list along with their titles and there filter key used when applying filter in list.</li> <li><code>renderList()</code> function is used to add actions buttons in the list, using edit button we will open form page where we can edit or delete a specific tuple (row) from table.</li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Qloapps/qloapps-docs/edit/master/docs/module_development/admin-controller.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/2/2023, 11:46:12 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/module_development/frontoffice-controller.html" class="prev">
        Display Content in Front office
      </a></span> <span class="next"><a href="/module_development/module-translations.html">
        Translations
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.e51dc7ac.js" defer></script><script src="/assets/js/2.5b266ac9.js" defer></script><script src="/assets/js/6.f6907ecb.js" defer></script>
  </body>
</html>
