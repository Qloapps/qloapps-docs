<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>QloApps Webservice Library | QloApps Documentation</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" href="/favicon.ico">
    <meta name="description" content="QloApps Developer Documentation">
    
    <link rel="preload" href="/assets/css/0.styles.5803b1a3.css" as="style"><link rel="preload" href="/assets/js/app.e51dc7ac.js" as="script"><link rel="preload" href="/assets/js/2.5b266ac9.js" as="script"><link rel="preload" href="/assets/js/51.761803a6.js" as="script"><link rel="prefetch" href="/assets/js/10.8d109458.js"><link rel="prefetch" href="/assets/js/11.f31594c2.js"><link rel="prefetch" href="/assets/js/12.ada217e9.js"><link rel="prefetch" href="/assets/js/13.a482bc98.js"><link rel="prefetch" href="/assets/js/14.c2e3b635.js"><link rel="prefetch" href="/assets/js/15.76f64c71.js"><link rel="prefetch" href="/assets/js/16.0ddca99d.js"><link rel="prefetch" href="/assets/js/17.492ad72c.js"><link rel="prefetch" href="/assets/js/18.3e90ddf6.js"><link rel="prefetch" href="/assets/js/19.57023bff.js"><link rel="prefetch" href="/assets/js/20.b220e8ef.js"><link rel="prefetch" href="/assets/js/21.9957bd35.js"><link rel="prefetch" href="/assets/js/22.13d0bde6.js"><link rel="prefetch" href="/assets/js/23.d417f008.js"><link rel="prefetch" href="/assets/js/24.b4fc4828.js"><link rel="prefetch" href="/assets/js/25.6bc74730.js"><link rel="prefetch" href="/assets/js/26.f11c8063.js"><link rel="prefetch" href="/assets/js/27.4819fa47.js"><link rel="prefetch" href="/assets/js/28.57023b92.js"><link rel="prefetch" href="/assets/js/29.3d147444.js"><link rel="prefetch" href="/assets/js/3.44c03bf6.js"><link rel="prefetch" href="/assets/js/30.b24d150f.js"><link rel="prefetch" href="/assets/js/31.154f4b9c.js"><link rel="prefetch" href="/assets/js/32.0818a40d.js"><link rel="prefetch" href="/assets/js/33.254290f0.js"><link rel="prefetch" href="/assets/js/34.715b5125.js"><link rel="prefetch" href="/assets/js/35.1f665de7.js"><link rel="prefetch" href="/assets/js/36.d5c610f9.js"><link rel="prefetch" href="/assets/js/37.26d6155b.js"><link rel="prefetch" href="/assets/js/38.2f71fce8.js"><link rel="prefetch" href="/assets/js/39.267bdfaf.js"><link rel="prefetch" href="/assets/js/4.273885aa.js"><link rel="prefetch" href="/assets/js/40.8f0b57d5.js"><link rel="prefetch" href="/assets/js/41.110613ac.js"><link rel="prefetch" href="/assets/js/42.a98453f5.js"><link rel="prefetch" href="/assets/js/43.40f1ccd8.js"><link rel="prefetch" href="/assets/js/44.6b1a988c.js"><link rel="prefetch" href="/assets/js/45.d64a8834.js"><link rel="prefetch" href="/assets/js/46.5842f7b8.js"><link rel="prefetch" href="/assets/js/47.8100237b.js"><link rel="prefetch" href="/assets/js/48.12be0c62.js"><link rel="prefetch" href="/assets/js/49.13de6223.js"><link rel="prefetch" href="/assets/js/5.4f6a235c.js"><link rel="prefetch" href="/assets/js/50.6450b5fd.js"><link rel="prefetch" href="/assets/js/6.f6907ecb.js"><link rel="prefetch" href="/assets/js/7.1ecf9302.js"><link rel="prefetch" href="/assets/js/8.00567e5f.js"><link rel="prefetch" href="/assets/js/9.1d044aa4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5803b1a3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="QloApps Documentation" class="logo"> <span class="site-name can-hide">QloApps Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://forums.qloapps.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Forum
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://qloapps.com/addons/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Extensions
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/webkul/hotelcommerce" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute to QloApps
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://forums.qloapps.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Forum
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://qloapps.com/addons/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Extensions
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/webkul/hotelcommerce" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute to QloApps
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/introduction/" class="sidebar-heading clickable"><span>Introduction</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/architecture/" class="sidebar-heading clickable"><span>Architecture</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/development/" class="sidebar-heading clickable"><span>Development</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/database/" class="sidebar-heading clickable"><span>Database</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/helpers/" class="sidebar-heading clickable"><span>Helpers</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/module_development/" class="sidebar-heading clickable"><span>Module Development</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/webservice/" class="sidebar-heading clickable router-link-active open"><span>Webservice API</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/webservice/enable-webservice.html" class="sidebar-link">Enable Webservice</a></li><li><a href="/webservice/basic-topics.html" class="sidebar-link">Basics | First Steps</a></li><li><a href="/webservice/qloapps-webservice-lib.html" aria-current="page" class="active sidebar-link">QloApps Webservice Library</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webservice/qloapps-webservice-lib.html#read-a-resource" class="sidebar-link">Read A Resource</a></li><li class="sidebar-sub-header"><a href="/webservice/qloapps-webservice-lib.html#add-a-resource" class="sidebar-link">Add A Resource</a></li><li class="sidebar-sub-header"><a href="/webservice/qloapps-webservice-lib.html#update-resource" class="sidebar-link">Update Resource</a></li><li class="sidebar-sub-header"><a href="/webservice/qloapps-webservice-lib.html#delete-a-resource" class="sidebar-link">Delete a resource</a></li></ul></li><li><a href="/webservice/advanced-api-uses.html" class="sidebar-link">Advanced API Uses</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/theme/" class="sidebar-heading clickable"><span>Theme</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/testing/" class="sidebar-link">Testing</a></li><li><a href="/upgrade/" class="sidebar-link">Upgrade</a></li><li><a href="/contribute/" class="sidebar-link">Contribute</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="qloapps-webservice-library"><a href="#qloapps-webservice-library" class="header-anchor">#</a> QloApps Webservice Library</h1> <p>QloApps enables merchants to give third-party tools access to their websites' database through a CRUD API, otherwise called a webservice.</p> <p>Now you have learned how to configure the webservice and how accesses are given.</p> <p>Let's learn how to set up a webservice library to use it.</p> <h3 id="how-to-install"><a href="#how-to-install" class="header-anchor">#</a> How to install</h3> <h4 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a> Prerequisites</h4> <ul><li>QloApps &gt;= 1.5.0 is installed on a server.</li> <li><code>mod_rewrite</code>  is enabled.</li> <li><code>curl</code> extension is enabled in PHP</li></ul> <h4 id="web-service-library"><a href="#web-service-library" class="header-anchor">#</a> Web service library</h4> <p><strong>PSWebServiceLibrary.php</strong> file can be found in the repository:</p> <p><a href="https://github.com/PrestaShop/PrestaShop-webservice-lib/blob/master/PSWebServiceLibrary.php" target="_blank" rel="noopener noreferrer">https://github.com/PrestaShop/PrestaShop-webservice-lib/blob/master/PSWebServiceLibrary.php<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Follow the below steps to download the file :</p> <ul><li>Create an empty PHP file as PSWebServiceLibrary.php</li> <li>Go to <a href="https://raw.github.com/PrestaShop/PrestaShop-webservice-lib/master/PSWebServiceLibrary.php" target="_blank" rel="noopener noreferrer">https://raw.github.com/PrestaShop/PrestaShop-webservice-lib/master/PSWebServiceLibrary.php<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and copy-paste the code in PSWebServiceLibrary.php</li> <li>You have to load the PSWebServiceLibrary in your PHP script or application where you need it.</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">require_once</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'./PSWebServiceLibrary.php'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// create object of the web service</span>
<span class="token variable">$objWebService</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrestaShopWebservice</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token operator">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</span></code></pre></div><h4 id="accessing-webservice"><a href="#accessing-webservice" class="header-anchor">#</a> Accessing Webservice</h4> <p>To create your client, create an object of PrestaShopWebservice.</p> <p>PrestaShopWebservice constructor takes 3 parameters -</p> <ul><li>Root path of the website. For example, http://example.com/</li> <li>Authentication key. For example, MNBDHALDK122DA879ADAD12ASKSK12W3</li> <li>Boolean value for debug mode, <code>true</code> if Webservice uses debug mode else <code>false</code>.</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$objWebService</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrestaShopWebservice</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'http://example.com/'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'MNBDHALDK122DA879ADAD12ASKSK12W3'</span><span class="token punctuation">,</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>After creating the object you can use below methods for your operations :</p> <ul><li><strong>get()</strong>	: To retrieve the data of a resource.</li> <li><strong>add()</strong>	: To create data to a resource</li> <li><strong>edit()</strong> : To update data to a resource</li> <li><strong>delete()</strong> : To date from to a resource</li></ul> <h3 id="error-handling"><a href="#error-handling" class="header-anchor">#</a> Error Handling</h3> <p>By error handling, it is easy to detect issues and you will be able to correct them easily. Webservice library Error handling is done by using PHP exceptions.</p> <p>You have to use <strong>try-catch</strong> block for handing the exception thrown by the webservice library.</p> <p><strong>PrestaShopWebserviceException</strong> is used in the QloApps webservice library so that you can catch this exception only to deal with errors of webservice.</p> <p>Below is an example you to handle exception with try and catch blocks :</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// creating webservice object</span>
    <span class="token variable">$objWebService</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrestaShopWebservice</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'http://example.com/'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'MNBDHALDK122DA879ADAD12ASKSK12W3'</span><span class="token punctuation">,</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// get resources of customers</span>
    <span class="token variable">$xml</span> <span class="token operator">=</span> <span class="token variable">$objWebService</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'resource'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'customers'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">PrestaShopWebserviceException</span> <span class="token variable">$e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Show error message if exception occurrs</span>
    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'Error occurred in webservice :'</span> <span class="token operator">.</span> <span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="read-a-resource"><a href="#read-a-resource" class="header-anchor">#</a> Read A Resource</h2> <p>To read a resource from the QloApps webservice library :</p> <ul><li><p>The parameter of [key =&gt; value] array (<strong>['resource' =&gt; 'resource_name']</strong>) in which the wanted resource is defined.</p></li> <li><p>You need to call the get() method to retrieve an XML containing all the list of sent resoruce data.</p></li></ul> <h3 id="using-prestashopwebservice-get"><a href="#using-prestashopwebservice-get" class="header-anchor">#</a> Using PrestaShopWebservice::get()</h3> <h3 id="list-of-resource-ids"><a href="#list-of-resource-ids" class="header-anchor">#</a> List of resource IDs</h3> <p>Letâ€™s get a list of customer IDs in our example:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// webservice object</span>
    <span class="token variable">$webService</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrestaShopWebservice</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'http://example.com/'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'MNBDHALDK122DA879ADAD12ASKSK12W3'</span><span class="token punctuation">,</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// read customer resource</span>
    <span class="token variable">$xml</span> <span class="token operator">=</span> <span class="token variable">$webService</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span>
            <span class="token punctuation">[</span><span class="token string single-quoted-string">'resource'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'customers'</span><span class="token punctuation">]</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">PrestaShopWebserviceException</span> <span class="token variable">$e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'Error in getting resource : '</span><span class="token operator">.</span><span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="returned-xml-data"><a href="#returned-xml-data" class="header-anchor">#</a> Returned xml data</h4> <p>The returned data is a <strong>SimpleXMLElement object</strong> containing resource list. Below is the example of customers list :</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>qloapps</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xlink</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/1999/xlink<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>customers</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>customer</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xlink:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://example.com/api/customers/1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>customer</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xlink:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://example.com/api/customers/2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>customer</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xlink:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://example.com/api/customers/3<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>customer</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>4<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xlink:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://example.com/api/customers/4<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>customers</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>qloapps</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h4 id="get-children-elements"><a href="#get-children-elements" class="header-anchor">#</a> Get children elements</h4> <p>As we have got the <strong>SimpleXMLElement object</strong> as a webservice call result. Now we can loop through this object to get every customer ID.</p> <p>See the below example for better understanding :</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$resources</span> <span class="token operator">=</span> <span class="token variable">$xml</span><span class="token operator">-&gt;</span><span class="token property">customers</span><span class="token operator">-&gt;</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$resources</span> <span class="token keyword">as</span> <span class="token variable">$resource</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$attributes</span> <span class="token operator">=</span> <span class="token variable">$resource</span><span class="token operator">-&gt;</span><span class="token function">attributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// this resource ID can be used to call the webservice to get details of resource</span>
    <span class="token variable">$resourceId</span> <span class="token operator">=</span> <span class="token variable">$attributes</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>So this is how you get the list of available IDs of the resource and how to process the returned list.</p> <h3 id="retrieve-data-of-resource-id"><a href="#retrieve-data-of-resource-id" class="header-anchor">#</a> Retrieve data of resource ID</h3> <p><strong>Now what if you want to get all the data of any specific id of the resource?</strong></p> <p>Let's learn to get the data of an ID of the resource. Again understand it by the example of customer resources.</p> <p>We send the below parameters to get the data :</p> <ul><li><strong>resource</strong>: Name of the resource (customers)</li> <li><strong>id</strong>: Unique ID (int) of the resource.</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// webservice object</span>
    <span class="token variable">$webService</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrestaShopWebservice</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'http://example.com/'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'MNBDHALDK122DA879ADAD12ASKSK12W3'</span><span class="token punctuation">,</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// read customer resource</span>
    <span class="token variable">$xml</span> <span class="token operator">=</span> <span class="token variable">$webService</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span>
            <span class="token punctuation">[</span>
                <span class="token string single-quoted-string">'resource'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'customers'</span><span class="token punctuation">,</span>
                <span class="token string single-quoted-string">'id'</span> <span class="token operator">=&gt;</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token comment">// id of the resource which data to be retrieved</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">PrestaShopWebserviceException</span> <span class="token variable">$e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'Error in getting resource data : '</span><span class="token operator">.</span><span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="returned-xml-data-2"><a href="#returned-xml-data-2" class="header-anchor">#</a> Returned xml data</h4> <p>The returned data is a <strong>SimpleXMLElement object</strong> containing resource information. Below is the example of customer information :</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>qloapps</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xlink</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/1999/xlink<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>customer</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[7]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id_default_group</span> <span class="token attr-name"><span class="token namespace">xlink:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://example.com/api/groups/3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[3]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id_default_group</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id_lang</span> <span class="token attr-name"><span class="token namespace">xlink:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://example.com/api/languages/1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[1]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id_lang</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>newsletter_date_add</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[2021-12-20 02:30:15]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>newsletter_date_add</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ip_registration_newsletter</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ip_registration_newsletter</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>last_passwd_gen</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[2021-04-10 09:31:19]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>last_passwd_gen</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>secure_key</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[hdlaksj123809khdkladjlda23112jkk]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>secure_key</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>deleted</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[0]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>deleted</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>passwd</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[jlj381023810lajdla091ensdy3dljdx]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>passwd</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lastname</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[DOE]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lastname</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>firstname</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[John]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>firstname</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>email</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[pub@qloapps.com]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>email</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id_gender</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[1]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id_gender</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>birthday</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[1991-01-20]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>birthday</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>newsletter</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[1]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>newsletter</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optin</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[0]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optin</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>website</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>website</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>company</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>company</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>siret</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>siret</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ape</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ape</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>outstanding_allow_amount</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[0.000000]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>outstanding_allow_amount</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>show_public_prices</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[0]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>show_public_prices</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id_risk</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[0]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id_risk</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>max_payment_days</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[0]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>max_payment_days</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>active</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[1]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>active</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>note</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>note</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>is_guest</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[10]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>is_guest</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id_shop</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[1]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id_shop</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id_shop_group</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[1]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id_shop_group</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>date_add</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[2020-04-09 19:31:19]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>date_add</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>date_upd</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[2020-04-09 19:31:19]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>date_upd</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>reset_password_token</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>reset_password_token</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>reset_password_validity</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[0000-00-00 00:00:00]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>reset_password_validity</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>associations</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groups</span> <span class="token attr-name">nodeType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>group<span class="token punctuation">&quot;</span></span> <span class="token attr-name">api</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>groups<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>group</span> <span class="token attr-name"><span class="token namespace">xlink:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://example.com/api/groups/3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[3]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>group</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groups</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>associations</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>customer</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>qloapps</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p><strong><em>You can request http://example.com/api/customers/7 from your browser to get the same XML data retrieved above.</em></strong></p> <h4 id="get-the-fields-of-resource"><a href="#get-the-fields-of-resource" class="header-anchor">#</a> Get the fields of resource</h4> <p>As we have got the <strong>SimpleXMLElement object</strong> as a webservice call result. Now we can loop through this object to get every field of the resource.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$customerData</span> <span class="token operator">=</span> <span class="token variable">$xml</span><span class="token operator">-&gt;</span><span class="token property">customer</span><span class="token operator">-&gt;</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$firstName</span> <span class="token operator">=</span> <span class="token variable">$customerData</span><span class="token operator">-&gt;</span><span class="token property">firstname</span><span class="token punctuation">;</span>
<span class="token variable">$lastName</span> <span class="token operator">=</span> <span class="token variable">$customerData</span><span class="token operator">-&gt;</span><span class="token property">lastname</span><span class="token punctuation">;</span>

<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$customerData</span> <span class="token keyword">as</span> <span class="token variable">$key</span> <span class="token operator">=&gt;</span> <span class="token variable">$value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token variable">$key</span> <span class="token operator">.</span> <span class="token string single-quoted-string">': '</span> <span class="token operator">.</span> <span class="token variable">$value</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>So this is all about retrieving the data of resources through QloApps Webservice Library.</p> <h2 id="add-a-resource"><a href="#add-a-resource" class="header-anchor">#</a> Add A Resource</h2> <p>To add a resource via a webservice is a bit more complex than getting some data from the API. We have to send data by XML to the API. Also, make sure that the created XML must be understandable and complete before sending it to the webservice.</p> <p>We will have to use the blank schema of the resource. Then fill your data in the black schema and call the webservice API with add() method.</p> <p>Let's do it step by step process :</p> <p>Let's create a resource via Webservice for better understanding. We will take an example to create the customer resource.</p> <h3 id="step-1-retrieve-the-resource-blank-schema"><a href="#step-1-retrieve-the-resource-blank-schema" class="header-anchor">#</a> Step 1 : Retrieve the resource blank schema</h3> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// create webservice object</span>
    <span class="token variable">$webService</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrestaShopWebservice</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'http://example.com/'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'MNBDHALDK122DA879ADAD12ASKSK12W3'</span><span class="token punctuation">,</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// call to retrieve the blank schema</span>
    <span class="token variable">$blankSchemaXml</span> <span class="token operator">=</span> <span class="token variable">$webService</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'url'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'http://example.com/api/customers?schema=blank'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">PrestaShopWebserviceException</span> <span class="token variable">$e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'Error in getting resource schema '</span> <span class="token operator">.</span> <span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="step-2-fill-the-schema"><a href="#step-2-fill-the-schema" class="header-anchor">#</a> Step 2 : Fill the schema</h3> <p>As we have got the empty xml from the above code, Now we have to fill data to add for the resource.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// fill customer data to create customer</span>
<span class="token variable">$customerFields</span> <span class="token operator">=</span> <span class="token variable">$blankSchemaXml</span><span class="token operator">-&gt;</span><span class="token property">customer</span><span class="token operator">-&gt;</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$customerFields</span><span class="token operator">-&gt;</span><span class="token property">firstname</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'John'</span><span class="token punctuation">;</span>
<span class="token variable">$customerFields</span><span class="token operator">-&gt;</span><span class="token property">lastname</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'DOE'</span><span class="token punctuation">;</span>
<span class="token variable">$customerFields</span><span class="token operator">-&gt;</span><span class="token property">email</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'johndoe@demo.com'</span><span class="token punctuation">;</span>
<span class="token variable">$customerFields</span><span class="token operator">-&gt;</span><span class="token property">passwd</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'passkey@12#'</span><span class="token punctuation">;</span>
<span class="token operator">.</span>
<span class="token operator">.</span>

</code></pre></div><h3 id="step-3-add-the-resource"><a href="#step-3-add-the-resource" class="header-anchor">#</a> Step 3 : Add the resource</h3> <p>After fill all the fields send parameters in the add() method.</p> <p>We send below parameters in the add method :</p> <ul><li><strong>resource</strong>: Name of the resource</li> <li><strong>postXml</strong> : XML content (string) created as $xml-&gt;asXML()</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$createdXml</span> <span class="token operator">=</span> <span class="token variable">$webService</span><span class="token operator">-&gt;</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'resource'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'customers'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'postXml'</span> <span class="token operator">=&gt;</span> <span class="token variable">$blankSchemaXml</span><span class="token operator">-&gt;</span><span class="token function">asXML</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$newCustomerFields</span> <span class="token operator">=</span> <span class="token variable">$createdXml</span><span class="token operator">-&gt;</span><span class="token property">customer</span><span class="token operator">-&gt;</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token string single-quoted-string">'Customer created with ID '</span> <span class="token operator">.</span> <span class="token variable">$newCustomerFields</span><span class="token operator">-&gt;</span><span class="token property">id</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>

</code></pre></div><hr> <p><strong>NOTE</strong> : Every resource has validation rules i.e. required fields, field types and formats etc.) of its own. You have to follow these conditions while filling data in the schema otherwise the webservice will not add the resource.</p> <p>Use synopsis schema to know the validation rules of a resource. For example, http://example.com/api/customers?schema=synopsis</p> <hr> <h2 id="update-resource"><a href="#update-resource" class="header-anchor">#</a> Update Resource</h2> <p>Updating a resource is similar to adding resource flow. In the creation, we will have to send a blank full schema with the values entered. But while updating, we can get the XML from webservice and the update only fields which we want to update.</p> <p>Let's Update a resource via Webservice for better understanding. We will take an example to update the customer resource.</p> <h3 id="step-1-retrieve-the-resource"><a href="#step-1-retrieve-the-resource" class="header-anchor">#</a> Step 1: Retrieve the resource</h3> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// create webservice object</span>
    <span class="token variable">$webService</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrestaShopWebservice</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'http://example.com/'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'MNBDHALDK122DA879ADAD12ASKSK12W3'</span><span class="token punctuation">,</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// get customer with id = 1</span>
    <span class="token variable">$xml</span> <span class="token operator">=</span> <span class="token variable">$webService</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'resource'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'customers'</span><span class="token punctuation">,</span>
        <span class="token comment">// you can send a value of id which is dynamically calculated by code.</span>
        <span class="token string single-quoted-string">'id'</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">PrestaShopWebserviceException</span> <span class="token variable">$e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'Error in getting customer : '</span><span class="token operator">.</span><span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="step-2-fill-the-schema-2"><a href="#step-2-fill-the-schema-2" class="header-anchor">#</a> Step 2 : Fill the schema</h3> <p>As we have got the XML from the above code, now we have to update only the fields which we want to update for the resource (other fields are already present in the XML).</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$customerFields</span> <span class="token operator">=</span> <span class="token variable">$xml</span><span class="token operator">-&gt;</span><span class="token property">customer</span><span class="token operator">-&gt;</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$customerFields</span><span class="token operator">-&gt;</span><span class="token property">firstname</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'John'</span><span class="token punctuation">;</span>
<span class="token variable">$customerFields</span><span class="token operator">-&gt;</span><span class="token property">lastname</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'DOE'</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="step-3-update-the-resource"><a href="#step-3-update-the-resource" class="header-anchor">#</a> Step 3 : Update the resource</h3> <p>After updating the fields send parameters in the edit() method.</p> <p>We send below parameters in the edit method :</p> <ul><li><strong>resource</strong>: Name of the resource</li> <li><strong>id</strong> : Id of the resource to be updated</li> <li><strong>putXml</strong> : XML content (string) created as $xml-&gt;asXML()</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$updatedXml</span> <span class="token operator">=</span> <span class="token variable">$webService</span><span class="token operator">-&gt;</span><span class="token function">edit</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'resource'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'customers'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'id'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword type-casting">int</span><span class="token punctuation">)</span> <span class="token variable">$customerFields</span><span class="token operator">-&gt;</span><span class="token property">id</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'putXml'</span> <span class="token operator">=&gt;</span> <span class="token variable">$xml</span><span class="token operator">-&gt;</span><span class="token function">asXML</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$customerFields</span> <span class="token operator">=</span> <span class="token variable">$updatedXml</span><span class="token operator">-&gt;</span><span class="token property">customer</span><span class="token operator">-&gt;</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token string single-quoted-string">'Customer resource updated with ID '</span> <span class="token operator">.</span> <span class="token variable">$customerFields</span><span class="token operator">-&gt;</span><span class="token property">id</span><span class="token punctuation">;</span>

</code></pre></div><hr> <p><strong>NOTE</strong>: There may be some more complex resources (ex. room_types).
You need to use a less generic code to clean the extra fields or copy them into a blank schema.</p> <hr> <h2 id="delete-a-resource"><a href="#delete-a-resource" class="header-anchor">#</a> Delete a resource</h2> <p>To delete a resource with QloApps webservice library :</p> <ul><li>You need resource ID</li> <li>You have to use the delete() method.</li></ul> <p>Below is the code to use PrestaShopWebservice::delete</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token variable">$webService</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrestaShopWebservice</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'http://example.com/'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'MNBDHALDK122DA879ADAD12ASKSK12W3'</span><span class="token punctuation">,</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
    <span class="token variable">$webService</span><span class="token operator">-&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'resource'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'customers'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'id'</span> <span class="token operator">=&gt;</span> <span class="token variable">$id</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'Customer id : '</span> <span class="token operator">.</span> <span class="token variable">$id</span> <span class="token operator">.</span> <span class="token string single-quoted-string">' is deleted successfully.'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">PrestaShopWebserviceException</span> <span class="token variable">$e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'Error:'</span> <span class="token operator">.</span> <span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Qloapps/qloapps-docs/edit/master/docs/webservice/qloapps-webservice-lib.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/2/2023, 11:46:12 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/webservice/basic-topics.html" class="prev">
        Basics | First Steps
      </a></span> <span class="next"><a href="/webservice/advanced-api-uses.html">
        Advanced API Uses
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.e51dc7ac.js" defer></script><script src="/assets/js/2.5b266ac9.js" defer></script><script src="/assets/js/51.761803a6.js" defer></script>
  </body>
</html>
